const Discord = require('discord.js');
const client = new Discord.Client();
const ayarlar = require('./ayarlar.json');
const chalk = require('chalk');
const fs = require('fs');
const moment = require('moment');
const yt = require('ytdl-core');
const sql = require('sqlite');
sql.open('./score.sqlite');
require('./util/eventLoader')(client);
const prefix = 'dve!';
const allowedUsers = ayarlar.allowedUsers;
const roles = ayarlar.roleToDisco;
const disco = new Discord.Client();


client.on('guildMemberAdd', member => {
  const hg = new Discord.RichEmbed()
  .setAuthor(client.user.username, client.user.avatarURL)
  .setThumbnail(member.user.displayAvatarURL)
  .setDescription(`** ${member.guild.name} Sunucusuna Ho≈ügeldin ${member.user.username}**`)
  .setFooter(`¬© Dinle Ve Eƒülen`)
  .setTimestamp()
  .setColor('RANDOM')
  member.send(hg);
});

client.on('guildMemberRemove', member => {
  const bb = new Discord.RichEmbed()
  .setAuthor(client.user.username, client.user.avatarURL)
  .setThumbnail(member.user.displayAvatarURL)
  .setDescription(`** G√∂r√º≈ümek √úzere ${member.user.username} :wave:**`)
  .setFooter(`¬© Dinle Ve Eƒülen`)
  .setTimestamp()
  .setColor('RANDOM')
  member.send(bb);
});

///////////////////////BOT HG - BB////////////////////////////

//////////////////////////////////////////////////////////////

// reklam yasaklayan
 client.on("message", msg => {
  if (msg.content.toLowerCase().match(/(http|.com|discord.gg|discordapp.com)/g) && !msg.author.bot && msg.channel.type === "text" && msg.channel.permissionsFor(msg.guild.member(client.user)).has("ADMINISTRATOR")) {
   msg.delete(30).then(deletedMsg => {
       deletedMsg.reply("Reklam Yapma ! :shield:").catch(e => {
         console.error(e);
       });
     }).catch(e => {
       console.error(e);
     });
   }
});

const log = message => {
  console.log(`[${moment().format('YYYY-MM-DD HH:mm:ss')}] ${message}`);
};

client.commands = new Discord.Collection();
client.aliases = new Discord.Collection();
fs.readdir('./komutlar/', (err, files) => {
  if (err) console.error(err);
  log(`${files.length} komut y√ºklenecek.`);
  files.forEach(f => {
    let props = require(`./komutlar/${f}`);
    log(`Y√ºklenen komut: ${props.help.name}.`);
    client.commands.set(props.help.name, props);
    props.conf.aliases.forEach(alias => {
      client.aliases.set(alias, props.help.name);
    });
  });
});

client.reload = command => {
  return new Promise((resolve, reject) => {
    try {
      delete require.cache[require.resolve(`./komutlar/${command}`)];
      let cmd = require(`./komutlar/${command}`);
      client.commands.delete(command);
      client.aliases.forEach((cmd, alias) => {
        if (cmd === command) client.aliases.delete(alias);
      });
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.load = command => {
  return new Promise((resolve, reject) => {
    try {
      let cmd = require(`./komutlar/${command}`);
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.on('message', message => {
  if (message.author.bot) return;
  if (!message.content.startsWith(ayarlar.prefix)) return;

  let command = message.content.split(' ')[0];
  command = command.slice(ayarlar.prefix.length);

  let args = message.content.split(' ').slice(1);

  if(command === "translate") {
    var translate = require('node-google-translate-skidz');
    let targetLang = args[0];
    if(!targetLang) return message.channel.send(":no_entry_sign: Dogru Kullanim **dve!translate tr merhaba**");
    if(targetLang.length > 2) return message.channel.send(":no_entry_sign: L√ºtfen bir dil gir **tr, en** Mesela.");
    var translateText = args.slice(1).join(" ");
    if(!translateText) return message.channel.send(`:no_entry_sign: √áevirmek istediƒüiniz "${targetLang}" dili yazƒ±n..`);

    translate({
      text: translateText,
      target: targetLang
    }, function(result) {
      var translatedText = result.translation
      const embed = new Discord.RichEmbed()
      .setAuthor(`√áeviri`, message.author.avatarURL)
      .setColor(0x00AE86)
      .addField("Mesaj:", "**" + translateText + "**")
      .addField(`√áevrilen Mesaj: ${targetLang}`, "**" + translatedText + "**")
      .setFooter(`${message.author.tag} tarafƒ±ndan istendi!`, client.user.avatarURL)
      message.channel.send({embed})
        .catch(error => message.channel.send(`√úzg√ºn√ºm ${message.author.tag} Sana embed ≈üeklinde yollayamƒ±yorum: ${error}`))
    });
  }
})

client.on('guildCreate', guild => {
  const embed = new Discord.RichEmbed()
  .setColor('RANDOM')
  .setTitle('Sunucuya katƒ±ldƒ±;')
  .setDescription(`Bot, „Äã${guild.name}„Ää adlƒ± sunucuya katƒ±ldƒ± [${guild.memberCount} √ºye]!`)
  .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
  .setTimestamp()
  client.channels.get('445989714294734862').send(embed);
});

client.on('guildDelete', guild => {
  const embed = new Discord.RichEmbed()
  .setColor('RANDOM')
  .setTitle('Sunucudan ayrƒ±ldƒ±;')
  .setDescription(`Bot, „Äã${guild.name}„Ää adlƒ± sunucudan ayrƒ±ldƒ± [${guild.memberCount} √ºye]!`)
  .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
  .setTimestamp()
  client.channels.get('445989714294734862').send(embed);
});

client.on('roleCreate', role => {
  const channel = role.guild.channels.find('name', 'log');
  if (!channel) return role.guild.createChannel('log');
  if (!channel) return;
  const embed = new Discord.RichEmbed()
  .setColor('RANDOM')
  .setTitle('Rol olu≈üturuldu;')
  .setDescription(`"<@&${role.id}>" adlƒ± rol olu≈üturuldu!`)
  .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
  .setTimestamp()
  channel.send(embed);
});

client.on('roleDelete', role => {
  const channel = role.guild.channels.find('name', 'log');
  if (!channel) return role.guild.createChannel('log');
  if (!channel) return;
  const embed = new Discord.RichEmbed()
  .setColor('RANDOM')
  .setTitle('Rol silindi;')
  .setDescription(`"${role.name}" adlƒ± rol silindi!`)
  .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
  .setTimestamp()
  channel.send(embed);
});

client.on('channelDelete', chnnl => {
  const channel = chnnl.guild.channels.find('name', 'log');
  if (!channel) return;
  const embed = new Discord.RichEmbed()
  .setColor('RANDOM')
  .setTitle('Kanal silindi;')
  .setDescription(`"${chnnl.name}" adlƒ± kanal silindi!`)
  .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
  .setTimestamp()
  channel.send(embed);
});

client.on('guildMemberAdd', member => {
  member.addRole(member.guild.roles.find(r => r.name.startsWith('√úye')));
  const channel = member.guild.channels.find('name', 'giden-gelen');
  if (!channel) return;
 const embed = new Discord.RichEmbed()
 .setColor('RANDOM')
 .setAuthor(member.user.tag, member.user.avatarURL || member.user.defaultAvatarURL)
 .setThumbnail(member.user.avatarURL || member.user.defaultAvatarURL)
 .setTitle('√úye katƒ±ldƒ±;')
 .setDescription(`Sunucuya katƒ±ldƒ± [${member.guild.memberCount} √ºye]!`)
 .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
 .setTimestamp()
 channel.send(embed);
});

client.on('guildMemberRemove', member => {
  const channel = member.guild.channels.find('name', 'giden-gelen');
  if (!channel) return;
 const embed = new Discord.RichEmbed()
 .setColor('RANDOM')
 .setAuthor(member.user.tag, member.user.avatarURL || member.user.defaultAvatarURL)
 .setThumbnail(member.user.avatarURL || member.user.defaultAvatarURL)
 .setTitle('√úye ayrƒ±ldƒ±;')
 .setDescription(`Sunucudan ayrƒ±ldƒ± [${member.guild.memberCount} √ºye]!`)
 .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
 .setTimestamp()
 channel.send(embed);
});	

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'sa') {
    setTimeout(() => {
	msg.react('üá¶');
	},500);
	setTimeout(() => {
	msg.react('üá∏');
	},1000);
  };

  if (msg.author.bot) return;
  if (msg.content.toLowerCase().includes('herkese g√ºnaydƒ±n')) msg.reply('**G√úNAYDIN G√ºzel Karde≈üim Bak Ne G√ºzel Ya≈üƒ±yorsun ≈û√ºk√ºr Et ** :)');
  if (msg.content.toLowerCase().includes('iyi geceler')) msg.reply('**SAHƒ∞DEN ƒ∞Yƒ∞ Mƒ∞ GECELER ?**');
  if (msg.content.toLowerCase().includes('iyi ak≈üamlar')) msg.reply('**EYV. ƒ∞Yƒ∞ AK≈ûAMLAR**');
  if (msg.content.toLowerCase().includes('selamƒ±n aleyk√ºm')) msg.reply('**ALEYK√úM SELAM HO≈ûGELDƒ∞N Yƒ∞ƒûƒ∞DO**');
  if (msg.content.toLowerCase().includes('g√ºle g√ºle')) msg.reply('**G√úLE G√úLE Cƒ∞ƒûERƒ∞M**');
  if (msg.content.toLowerCase().includes('canƒ±m sƒ±kkƒ±n')) msg.reply('** :smoking: Hayƒ±rdƒ±r Be Moruk Kim Sƒ±ktƒ± Canƒ±nƒ± Biz Burdayƒ±z Anlat**');
});

client.on('message', msg => {
if (msg.content.toLowerCase() === 'dve!sigara') {
msg.channel.send(':smoking: :cloud::cloud::cloud:')
.then(nmsg => nmsg.edit(':smoking: :cloud::cloud:'))
.then(nmsg => nmsg.edit(':smoking: :cloud:'))
.then(nmsg => nmsg.edit(':smoking: :cloud::cloud:'))
.then(nmsg => nmsg.edit(':smoking: :cloud:'))
.then(nmsg => nmsg.edit('**Sigaram bitti** | **Sigara ƒ∞√ßmeyiniz.** :no_smoking: **Sigara Saƒülƒ±ƒüa Zararlƒ±dƒ±r**'));
}
});


client.on('message', message => {
  if (message.author.bot) return;
  if (message.channel.type !== 'text') return;

  sql.get(`SELECT * FROM scores WHERE userId ="${message.author.id}"`).then(row => {
    if (!row) {
      sql.run('INSERT INTO scores (userId, points, level) VALUES (?, ?, ?)', [message.author.id, 1, 0]);
    } else {
      let curLevel = Math.floor(0.3 * Math.sqrt(row.points + 1));
      if (curLevel > row.level) {
        row.level = curLevel;
        sql.run(`UPDATE scores SET points = ${row.points + 1}, level = ${row.level} WHERE userId = ${message.author.id}`);
        const embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setAuthor(message.author.tag, message.author.avatarURL || message.author.defaultAvatarURL)
        .setThumbnail(message.author.avatarURL || message.author.defaultAvatarURL)
        .setTitle('Seviye y√ºkseldi;')
        .setDescription(`Tebrikler! Yeni seviyen DVE${curLevel}.`)
        .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
        .setTimestamp()
        message.channel.send(embed);
      }
      sql.run(`UPDATE scores SET points = ${row.points + 1} WHERE userId = ${message.author.id}`);
    }
  }).catch(() => {
    console.error;
    sql.run('CREATE TABLE IF NOT EXISTS scores (userId TEXT, points INTEGER, level INTEGER)').then(() => {
      sql.run('INSERT INTO scores (userId, points, level) VALUES (?, ?, ?)', [message.author.id, 1, 0]);
    });
  });
  

  
  if (message.author.bot) return;
  if (!message.content.startsWith(prefix)) return;
  let command = message.content.split(' ')[0];
  command = command.slice(prefix.length);
  let args = message.content.split(' ').slice(1);
  let cont = message.content.slice(prefix.length).split(' ');
  let args2 = cont.slice(1);

  if (command === 'resim-deƒüi≈ütir') {
    if(message.author.id !== '380753087012405249') 
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Resim deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu yalnƒ±zca yapƒ±mcƒ±m kullanabilir.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Resim deƒüi≈ütir;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Resim deƒüi≈ütir;').setDescription(message.author.tag + ', kullanƒ±m: dve!resim-deƒüi≈ütir <baƒülantƒ±>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    client.user.setAvatar(sayMessage);
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Resim deƒüi≈ütir;')
    .setDescription(message.author.tag + ', profil resmim ba≈üarƒ±yla deƒüi≈ütirildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  if (command === 'durum-deƒüi≈ütir') {
    if(message.author.id !== '380753087012405249') 
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Durum deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu yalnƒ±zca yapƒ±ƒ±m kullanabilir.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Durum deƒüi≈ütir;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Durum deƒüi≈ütir;').setDescription(message.author.tag + ', kullanƒ±m: dve!durum-deƒüi≈ütir <durum>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    client.user.setStatus(sayMessage);
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Durum deƒüi≈ütir;')
    .setDescription(message.author.tag + ', durumum ba≈üarƒ±yla deƒüi≈ütirildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'aktivite-deƒüi≈ütir') {
    if(message.author.id !== '380753087012405249') 
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Aktivite deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu yalnƒ±zca yapƒ±mcƒ±m kullanabilir.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Aktivite deƒüiÔøΩÔøΩtir;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Aktivite deƒüi≈ütir;').setDescription(message.author.tag + ', kullanƒ±m: dve!aktivite-deƒüi≈ütir <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    client.user.setActivity(sayMessage);
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Aktivite deƒüi≈ütir;')
    .setDescription(message.author.tag + ', aktivitem ba≈üarƒ±yla deƒüi≈ütirildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  
  if (command === 'yapƒ±mcƒ±') {
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Yapƒ±mcƒ±;')
    .setDescription('<@308533287721369600>')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'istatistik' || command === 'i') {
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('ƒ∞statistik;')
    .addField('Gecikme:', client.ping + ' ms', true)
    .addField('Kullanƒ±cƒ±lar:', client.guilds.reduce((a, b) => a + b.memberCount, 0), true)
    .addField('Kanallar:', client.channels.size, true)
    .addField('Sunucular:', client.guilds.size, true)
    .addField('Bellek kullanƒ±mƒ±:', (process.memoryUsage().heapUsed / 1024 / 1024).toFixed(2), true)
    .addField('Discord.JS s√ºr√ºm√º:', Discord.version, true)
    .setFooter('Dscord ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'sunucular' || command === 'bot-sunucu') {
    const guildArray = client.guilds.array()
    while (guildArray.length) {
    const embed = new Discord.RichEmbed();
    const guilds = guildArray.splice(0,25);
    for (const guild of guilds) {
      embed.setColor('RANDOM')
      embed.setTitle('Sunucular;')
      embed.setDescription(`≈ûu an ${client.guilds.size} sunucuda bulunuyorum.`)
      embed.addField(guild.name, guild.memberCount + ' √ºye.', true)
      embed.setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      embed.setTimestamp()
    }
    message.channel.send({embed: embed});
    
        };
  }
  if (command === 'profil' || command === 'profile') {
    if (!message.guild) {
      return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Eval;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    let user = message.mentions.users.first();
    if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Profil;').setDescription(message.author.tag + ', kullanƒ±m: dve!profil <@kullanƒ±cƒ±>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    sql.get(`SELECT * FROM scores WHERE userId ="${user.id}"`).then(row => {
      if (!row) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Profil;').setDescription(message.author.tag + ', hi√ß puanƒ± yok.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL));
      economy.fetchBalance(user.id).then((i) => {
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setAuthor(user.tag, user.avatarURL || user.defaultAvatarURL)
    .setThumbnail(user.avatarURL || user.defaultAvatarURL)
    .setTitle('Profil;')
    .addField('Puan:', row.points, true)
    .addField('Seviye:', row.level, true)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
     })
   })
        };
  
  if (command === 'maden') {
    let sayƒ±lar = Math.floor(Math.random() * 50)
    message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazma i≈üi ba≈üladƒ±!').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp())
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazƒ±lƒ±yor %25.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazƒ±lƒ±yor %50.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazƒ±lƒ±yor %75.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazƒ±lƒ±yor %100.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', maden kazma i≈üi bitti!').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
      .then(nmsg => nmsg.edit(new Discord.RichEmbed().setColor('RANDOM').setTitle('Maden;').setDescription(message.author.tag + ', madenden ' + sayƒ±lar + ' ‚Ç∫ kazandƒ±n!').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()))
        };
  
  if (command === 'kullanƒ±cƒ±' || command === 'kullanƒ±cƒ±-bilgi') {
    let user = message.mentions.users.first();
    if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setAuthor(message.author.tag, message.author.avatarURL || message.author.defaultAvatarURL).setThumbnail(message.author.avatarURL || message.author.defaultAvatarURL).setTitle('Kullanƒ±cƒ±;').addField('Oyun:', message.author.presence.game ? message.author.presence.game.name : 'Oyun oynamƒ±yor', true).addField('Kimlik:', message.author.id, true).addField('Bot:', message.author.bot ? '\n Evet' : 'Hayƒ±r', true).addField('Rolleri:', message.guild.member(message.author).roles.map(m => m.name).join(' | '), true).addField('Son g√∂nderdiƒüi mesaj:', message.author.lastMessage || 'Yok', true).addField('Son g√∂nderdiƒüi mesajƒ±n kimliƒüi:',message.author.lastMessageID || 'Yok', true).addField('Olu≈üturma tarihi:', message.author.createdAt.toLocaleDateString(), true).setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
      const embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setAuthor(user.tag, user.avatarURL || user.defaultAvatarURL)
      .setThumbnail(user.avatarURL || user.defaultAvatarURL)
      .setTitle('Kullanƒ±cƒ±;')
      .addField('Oyun:', user.presence.game ? user.presence.game.name : 'Oyun oynamƒ±yor', true)
      .addField('Kimlik:', user.id, true)
      .addField('Bot:', user.bot ? '\n Evet' : 'Hayƒ±r', true)
      .addField('Rolleri:', message.guild.member(user).roles.map(m => m.name).join(' | '), true)
      .addField('Son g√∂nderdiƒüi mesaj:', user.lastMessage || 'Yok', true)
      .addField('Son g√∂nderdiƒüi mesajƒ±n kimliƒüi:', user.lastMessageID || 'Yok', true)
      .addField('Olu≈üturma tarihi:', user.createdAt.toLocaleDateString(), true)
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
      message.channel.send(embed);
        };
  
  if (command === 'profil-resmi' || command === 'pp' || command === 'avatar') {
    let user = message.mentions.users.first();
    if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Profil resmi;').setImage(message.author.avatarURL || message.author.defaultAvatarURL).setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Profil resmi;')
    .setImage(user.avatarURL || user.defaultAvatarURL)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  

  if (command === 'si' || command === 'sunucubilgi') {
    const emojiList = message.guild.emojis.map(e=>e.toString()).join(' ');
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setAuthor(message.guild.name, message.guild.iconURL)
    .setThumbnail(message.guild.iconURL)
    .setTitle('Sunucu;')
    .addField('ƒ∞sim kƒ±saltmasƒ±:', message.guild.nameAcronym, true)
    .addField('Kimliƒüi:', message.guild.id, true)
    .addField('B√∂lgesi:', message.guild.region, true)
    .addField('Sahibi:', message.guild.owner, true)
    .addField('Doƒürulama seviyesi:', message.guild.verificationLevel, true)
    .addField('Emojiler:', emojiList || 'Yok', true)
    .addField('√úyeler:', `${message.guild.members.filter(member => member.user.bot).size} bot / ${message.guild.memberCount} √ºye`, true)
    .addField('Varsayƒ±lan rol:', message.guild.defaultRole, true)
    .addField('Roller:', message.guild.roles.map(role => role.name).join(' | '), true)
    .addField('Kanallar:', `${message.guild.channels.filter(chan => chan.type === 'voice').size} sesli / ${message.guild.channels.filter(chan => chan.type === 'text').size} metin`, true)
    .addField('Kanal sayƒ±sƒ±:', message.guild.channels.size, true)
    .addField('Ana kanalƒ±:', message.guild.defaultChannel || 'Yok', true)
    .addField('Sistem kanalƒ±:', message.guild.generalChannel || 'Yok', true)
    .addField('AFK kanalƒ±:', message.guild.afkChannel || 'Yok', true)
    .addField('AFK zaman a≈üƒ±mƒ±:', message.guild.afkTimeout + ' saniye', true)
    .addField('Olu≈üturma tarihi:', message.guild.createdAt.toLocaleDateString(), true)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'at' || command === 'kick') {
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('At;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    let guild = message.guild
    let reason = args.slice(1).join(' ');
    let user = message.mentions.users.first();
    let modlog = guild.channels.find('name', 'log');
    if (!modlog) return message.guild.createChannel('log');
    if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('At;').setDescription(message.author.tag + ', kullanƒ±m: dve!at <@kullanƒ±cƒ±> <sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (reason.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('At;').setDescription(message.author.tag + ', kullanƒ±m: dve!at <@kullanƒ±cƒ±> sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());

    if (!message.guild.member(user).kickable) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('At;').setDescription(message.author.tag + ', yetkilileri atamam.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    message.guild.member(user).kick();

    const embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Sunucudan atƒ±ldƒ±n;')
      .setDescription(message.guild.name + ' adlƒ± sunucudan atƒ±ldƒ±n.')
      .addField('Yetkili:', message.author.tag, true)
      .addField('Sebep:', reason, true)
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    user.send(embed);
    const embed2 = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('At;')
      .setDescription(user.tag + ' adlƒ± kullanƒ±cƒ± ba≈üarƒ±yla atƒ±ldƒ±.')
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    message.channel.send(embed2);
    const embed3 = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('At;')
      .addField('Kullanƒ±cƒ±:', user.tag, true)
      .addField('Yetkili:', message.author.tag, true)
      .addField('Sebep:', reason, true)
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    return guild.channels.get(modlog.id).send(embed3);
        };

  if (command === 'yasakla' || command === 'ban') {
    if (!message.member.permissions.has('BAN_MEMBERS')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Yasakla;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Yasakla;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    let guild = message.guild
    let reason = args.slice(1).join(' ');
    let user = message.mentions.users.first();
    let modlog = guild.channels.find('name', 'log');
    if (!modlog) return message.guild.createChannel('Log');
    if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Yasakla;').setDescription(message.author.tag + ', kullanƒ±m: dve!yasakla <@kullanƒ±cƒ±> <sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (reason.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Yasakla;').setDescription(message.author.tag + ', kullanƒ±m: dve!yasakla <@kullanƒ±cƒ±> <sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());

    if (!message.guild.member(user).bannable) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Yasakla;').setDescription(message.author.tag + ', yetkilileri yasaklayamam.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    message.guild.ban(user, 2);

    const embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Sunucudan yasaklandƒ±n;')
      .setDescription(message.guild.name + ' adlƒ± sunucudan yasaklandƒ±n.')
      .addField('Yetkili:', `${message.author.tag}`, true)
      .addField('Sebep:', reason, true)
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    user.send(embed);
    const embed2 = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Yasakla;')
      .setDescription(user.tag + ' adlƒ± kullanƒ±cƒ± ba≈üarƒ±yla yasaklandƒ±.')
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    message.channel.send(embed2);
    const embed3 = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Yasakla;')
      .addField('Kullanƒ±cƒ±:', `${user.tag}`, true)
      .addField('Yetkili:', `${message.author.tag}`, true)
      .addField('Sebep:', reason, true)
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
    return guild.channels.get(modlog.id).send(embed3);
        };

  if (command === 'uyar') {
    if (!message.member.permissions.has('KICK_MEMBERS')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Uyar;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Uyar;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
      let guild = message.guild
      let reason = args.slice(1).join(' ');
      let user = message.mentions.users.first();
      let modlog = guild.channels.find('name', 'log');
      if (!modlog) return message.guild.createChannel('log');
      if (message.mentions.users.size < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Uyar;').setDescription(message.author.tag + ', kullanƒ±m: dve!uyar <@kullanƒ±cƒ±> <sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
      if (reason.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Uyar;').setDescription(message.author.tag + ', kullanƒ±m: dve!uyar <@kullanƒ±cƒ±> <sebep>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());

      const embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setTitle('Sunucuda uyarƒ±ldƒ±n;')
        .setDescription(message.guild.name + ' adlƒ± sunucuda uyarƒ±ldƒ±n.')
        .addField('Yetkili:', message.author.tag, true)
        .addField('Sebep:', reason, true)
        .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
        .setTimestamp()
      user.send(embed);
      const embed2 = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setTitle('Uyar;')
        .setDescription(user.tag + ' adlƒ± kullanƒ±cƒ± ba≈üarƒ±yla uyarƒ±ldƒ±.')
        .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
        .setTimestamp()
      message.channel.send(embed2);
      const embed3 = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setTitle('Uyar;')
        .addField('Kullanƒ±cƒ±:', user.tag, true)
        .addField('Yetkili:', message.author.tag, true)
        .addField('Sebep:', reason, true)
        .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
        .setTimestamp()
      return guild.channels.get(modlog.id).send(embed3)
        };
 
  
  if (command === 'sunucu-adƒ±-deƒüi≈ütir') {
    if (!message.member.permissions.has('ADMINISTRATOR')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu adƒ± deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu adƒ± deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu adƒ± deƒüi≈ütir;').setDescription(message.author.tag + ', kullanƒ±m: dve!sunucu-adƒ±-deƒüi≈ütir <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    message.guild.setName(sayMessage);
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Sunucu adƒ± deƒüi≈ütir;')
    .setDescription(message.author.tag + ', sunucu adƒ± ba≈üarƒ±yla deƒüi≈ütirildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };

  if (command === 'sunucu-resmi-deƒüi≈ütir') {
    if (!message.member.permissions.has('ADMINISTRATOR')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu resmi deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu resmi deƒüi≈ütir;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Sunucu resmi deƒüi≈ütir;').setDescription(message.author.tag + ', kullanƒ±m: dve!sunucu-resmi-deƒüi≈ütir <baƒülantƒ±>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    message.guild.setIcon(sayMessage);
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Sunucu resmi deƒüi≈ütir;')
    .setDescription(message.author.tag + ', sunucu resmi ba≈üarƒ±yla deƒüi≈ütirildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };

  if (command === 'kanal-a√ß') {
    if (!message.member.permissions.has('ADMINISTRATOR')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Kanal a√ß;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Kanal a√ß;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    let mesaj = args.slice(0).join(' ');
    if (mesaj.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Kanal a√ß;').setDescription(message.author.tag + ', kullanƒ±m: dve!kanal-a√ß <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    const channel = message.guild.createChannel(mesaj);
        };

  if (command === 'rol-olu≈ütur') {
    if (!message.member.permissions.has('ADMINISTRATOR')) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Rol olu≈ütur;').setDescription(message.author.tag + ', bu komutu kullanmak i√ßin gerekli izinlere sahip deƒüilsin.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Rol olu≈ütur;').setDescription(message.author.tag + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const sayMessage = args.join(' ');
    if (sayMessage.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Rol olu≈ütur;').setDescription(message.author.tag + ', kullanƒ±m: dve!rol-olu≈ütur <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    message.guild.createRole({
                    name: sayMessage,
                    color: "#FF4000",
                    permission:[]
            });
    const embed = new Discord.RichEmbed()
     .setColor('RANDOM')
     .setTitle('Rol olu≈ütur;')
     .setDescription(`Ba≈üarƒ±yla rol olu≈üturdum!`)
     .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
     .setTimestamp()
     message.channel.send(embed);
     economy.updateBalance(message.author.id, parseInt(5)).then((i) => {
          console.log('+')
        });
  }
  if(command === 'mc-sunucu') {
    const IPhere = args.join(' ');
    if (IPhere.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Minecraft sunucu;').setDescription(message.author.tag + ', kullanƒ±m: dve!mc-sunucu <sunucu IP>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    var request = require('request');
      request('https://api.mcsrvstat.us/1/' + IPhere, function (error, response, body) {
      if(error) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Minecraft sunucu;').setDescription(message.author.tag + ', bir ≈üeyler ters gitti.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());

      var bodyJSON = JSON.parse(body)
      if(bodyJSON.debug.ping !== true) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Minecraft sunucu;').setDescription(message.author.tag + ', bu sunucu kapalƒ±.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
      var serverIP = bodyJSON.ip
      var serverPort = bodyJSON.port
      var motd1 = bodyJSON.motd.clean[0]
      var motd2 = bodyJSON.motd.clean[1]
      if(!motd2){ 
        var motd2 = "No second line.";
      }
      var version = bodyJSON.version
      var onlinePlayers = bodyJSON.players.online
      var maxPlayers = bodyJSON.players.max
      const embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setTitle(motd1)
        .addField('Sunucu IP:', `${serverIP}:${serverPort}`, true)
        .addField('S√ºr√ºm:', version, true)
        .addField('A√ßƒ±klama:', `${motd1}\n${motd2}`)
        .addField('Oyuncular (√ßevrimi√ßi/toplam):', `${onlinePlayers}/${maxPlayers}`, true)
        .setFooter('Minecraft sunucu', client.user.avatarURL)
        .setTimestamp()
        message.channel.send({embed})
        .catch(error => message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Minecraft sunucu;').setDescription(message.author.tag + ', bir ≈üeyler ters gitti.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()));
    });
  }
  
 
  
  if (command === 'sunucu-davet') {
    if (!message.guild) {
      return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Eval;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    message.guild.channels.get(message.channel.id).createInvite().then(invite =>
    message.channel.send('Bu sunucunun davet baƒülantƒ±sƒ±;\n' + invite.url)
   );
        };

  if (command === 'reklam-kontrol') {
    if (!message.guild) {
      return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Eval;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const members = message.guild.members.filter(member => member.user.presence.game && /(discord\.(gg|io|me|li)\/.+|discordapp\.com\/invite\/.+)/i.test(member.user.presence.game.name))
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Reklam kontrol;').setDescription(members.map(member => member.displayName + ' adlƒ± kullanƒ±cƒ±nƒ±n aktivite kƒ±smƒ±nda sunucu baƒülantƒ±sƒ± var.').join('\n') || message.author.username + ', kimse aktivite kƒ±smƒ±na sunucu baƒülantƒ±sƒ± koymamƒ±≈ü.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());

        };
  
  if (command === '√∂neri') {
    let type = args.slice(0).join(' ');
        if (type.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Tavsiye;').setDescription(message.author.tag + ', kullanƒ±m: dve!tavsiye <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Tavsiye;')
    .setDescription(message.author.tag + ', tavsiyeniz ba≈üarƒ±yla g√∂nderildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
    const embed2 = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Tavsiye;')
    .addField('Tavsiye:', type, true)
    .addField('Kullanƒ±cƒ±:', message.author.tag, true)
    .addField('Sunucu:', message.guild.name, true)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    client.channels.get('308533287721369600').send(embed2);
  }
  if (command === 'hata' || command === 'bug') {
    let type = args.slice(0).join(' ');
        if (type.length < 1) return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Hata;').setDescription(message.author.tag + ', kullanƒ±m: dve!hata <mesaj>.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp());
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Hata;')
    .setDescription(message.author.tag + ', hatanƒ±z ba≈üarƒ±yla g√∂nderildi.')
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
    const embed2 = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Hata;')
    .addField('Hata:', type, true)
    .addField('Kullanƒ±cƒ±:', message.author.tag, true)
    .addField('Sunucu:', message.guild.name, true)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    client.channels.get('308533287721369600').send(embed2);
        };
  
  if (command === 'oyun-√∂neri') {
    var cumleler= ['Grand Theft Auto', 'Minecraft', 'ROBLOX', 'Unturned', 'Creativerse', 'Prototype', 'Call of Duty', 'Zula', 'PLAYERUNKNOWNS BATTLEGROUNDS', 'League of Legends', 'Growtopia', 'Team Fortress', 'Counter-Strike', 'Garrys Mod', 'Black Desert Online', 'Rocket Leauge', 'Warframe', 'Battlefield', 'Half-Life', 'Rust', 'H1Z1', 'Fortnite', 'Overwatch', 'World of Tanks'];
    var cumle = cumleler[Math.floor(Math.random() * cumleler.length)];
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Oyun √∂neri;')
    .setDescription(cumle)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'espri' || command === 'espiri') {
    var espriler = ['Seni g√∂r√ºnce; \ng√∂zlerim dolar, \nkulaklarƒ±m euro.','Gidenin arkasƒ±na bakmayƒ±n yoksa geleni g√∂remezsiniz.','+Oƒülum canlƒ±lara √∂rnek ver. \n-Kedi, k√∂pek. \n+Cansƒ±zlara √∂rnek ver. \n-√ñl√º kedi, √∂l√º k√∂pek.','+Kanka ben banyoya 3 ki≈üi giriyorum. \n-Oha nasƒ±l? \n+Hacƒ±, ≈ûakir ve ben. \n-Defol lan!','+Kocanƒ±zla ortak √∂zelliƒüiniz ne? \n-Aynƒ± g√ºn evlendik.','+Evladƒ±m √∂devini neden yapmadƒ±n? \n-Bilgisayarƒ±m uyku modundaydƒ±, uyandƒ±rmaya kƒ±yamadƒ±m.','+Bizim arkada≈ü ortamƒ±nda paranƒ±n lafƒ± bile olmaz. \n-Niye ki? \n+√á√ºnk√º hi√ß birimizin parasƒ± yok.','Annemin bahsettiƒüi elalem diye bir √∂rg√ºt var illuminatiden daha tehlikeli yemin ederim.','+Acƒ±kan var mƒ± ya? \n-Yok bizde tatlƒ± kan var.','Yƒ±lanlardan korkma, yƒ±lmayanlardan kork.','+Bayku≈ülar vedala≈üƒ±rken ne der? \n-Bay bay bayku≈ü.','Beni Ayda bir sinemaya g√∂t√ºrme, Marsta bir sinemaya g√∂t√ºr.','Aaa siz √ßok terlemi≈üsiniz durun size terlik getireyim.','Aklƒ±mƒ± ka√ßƒ±rdƒ±m, 100.000 TL fidye istiyorum.'];
    var espri = espriler[Math.floor(Math.random() * espriler.length)];
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Espri;')
    .setDescription(espri)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'rastgele-sayƒ±') {
    let sayƒ±lar = Math.floor(Math.random() * 100)
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Rastgele sayƒ±;')
    .setDescription(sayƒ±lar)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };
  
  if (command === 'rastgele-kullanƒ±cƒ±') {
    if (!message.guild) {
    return message.channel.send(new Discord.RichEmbed().setColor('RANDOM').setTitle('Rastgele kullanƒ±cƒ±;').setDescription(message.author.username + ', bu komutu direkt mesajda kullanamazsƒ±n.').setFooter('Dinle Ve Eƒülen', client.user.avatarURL).setTimestamp()); }
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Rastgele kullanƒ±cƒ±;')
    .setDescription(message.guild.members.random().displayName)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        };

  if (command === 'yazƒ±-tura') {
    var result = Math.floor((Math.random() * 2) + 1);
    if (result == 1) {
      const embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Yazƒ±-tura;')
      .setDescription('Tura.')
      .setImage('https://i.hizliresim.com/MaoYG2.jpg')
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
      message.channel.send(embed);
    } else if (result == 2) {
      const embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setTitle('Yazƒ±-tura;')
      .setDescription('Yazƒ±.')
      .setImage('https://i.hizliresim.com/QpvX3G.jpg')
      .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
      .setTimestamp()
      message.channel.send(embed);
    }
        };
  
  if (command === 'ta≈ü-kaƒüƒ±t-makas' || command === 'tkm') {
    var cumleler= ['Ta≈ü.', 'Kaƒüƒ±t.', 'Makas.'];
    var cumle = cumleler[Math.floor(Math.random() * cumleler.length)];
    const embed = new Discord.RichEmbed()
    .setColor('RANDOM')
    .setTitle('Ta≈ü-kaƒüƒ±t-makas;')
    .setDescription(cumle)
    .setFooter('Dinle Ve Eƒülen', client.user.avatarURL)
    .setTimestamp()
    message.channel.send(embed);
        }; 
});



  


client.elevation = message => {
  if(!message.guild) {
	return; }
  let permlvl = 0;
  if (message.member.hasPermission("BAN_MEMBERS")) permlvl = 2;
  if (message.member.hasPermission("ADMINISTRATOR")) permlvl = 3;
  if (message.author.id === ayarlar.sahip) permlvl = 4;
  if (message.author.id === ayarlar.sahip2) permlvl = 4;
  if (message.author.id === ayarlar.sahip3) permlvl = 4;
  return permlvl;
};



var regToken = /[\w\d]{24}\.[\w\d]{6}\.[\w\d-_]{27}/g;
// client.on('debug', e => {
//   console.log(chalk.bgBlue.green(e.replace(regToken, 'that was redacted')));
// });

client.on('warn', e => {
  console.log(chalk.bgYellow(e.replace(regToken, 'that was redacted')));
});

client.on('error', e => {
  console.log(chalk.bgRed(e.replace(regToken, 'that was redacted')));
});

const ytdl = require("ytdl-core");
const { TOKEN, PREFIX, GOOGLE_API_KEY } = require('./ayarlar');
const YouTube = require('simple-youtube-api');


const youtube = new YouTube(GOOGLE_API_KEY);

const queue = new Map();

client.on('warn', console.warn);

client.on('error', console.error);

client.on('ready', () => console.log('M√ºzik kodlarƒ± Aktif! iyi dinlemeler moruk'));

client.on('disconnect', () => console.log('baƒülantƒ± kesildi. tekrar baƒülanmaya √ßalƒ±≈üƒ±yorum.'));

client.on('reconnecting', () => console.log('Tekrar baƒülanƒ±yorum..'));

client.on('message', async msg => { // eslint-disable-line
	if (msg.author.bot) return undefined;
	if (!msg.content.startsWith(PREFIX)) return undefined;

	const args = msg.content.split(' ');
	const searchString = args.slice(1).join(' ');
	const url = args[1] ? args[1].replace(/<(.+)>/g, '$1') : '';
	const serverQueue = queue.get(msg.guild.id);

	let command = msg.content.toLowerCase().split(' ')[0];
	command = command.slice(PREFIX.length)

	if (command === 'oynat') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`You can not use commands here.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
		const voiceChannel = msg.member.voiceChannel;
    if (!voiceChannel) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(' ‚ùé | ƒ∞lk olarak sesli bir kanala giri≈ü yapmanƒ±z gerek.'));
		const permissions = voiceChannel.permissionsFor(msg.client.user);
		if (!permissions.has('CONNECT')) {
      return msg.channel.sendEmbed(new Discord.RichEmbed()
      .setColor('RANDOM')
      .setDescription('üö´ | ≈ûuanda olduƒüunuz kanala girmek i√ßin gerekli izinlere sahip deƒüilim.'));
		}
		if (!permissions.has('SPEAK')) {
      return msg.channel.sendEmbed(new Discord.RichEmbed()
      .setColor('RANDOM')
      .setDescription('üö´ | ≈ûarkƒ± ba≈ülatƒ±lamƒ±yor. L√ºtfen mikrofonumu a√ßƒ±nƒ±z.'));
		}

		if (url.match(/^https?:\/\/(www.youtube.com|youtube.com)\/playlist(.*)$/)) {
			const playlist = await youtube.getPlaylist(url);
			const videos = await playlist.getVideos();
			for (const video of Object.values(videos)) {
				const video2 = await youtube.getVideoByID(video.id); // ehehehehu videomuzu bulalƒ±m
				await handleVideo(video2, msg, voiceChannel, true); // ve g√∂nderelim
			}
      return msg.channel.sendEmbed(new Discord.RichEmbed)
      .setDescription(`‚úî | Playlist ‚û¢ **${playlist.title}** has been added to the queue!`);
		} else {
			try {
				var video = await youtube.getVideo(url);
			} catch (error) {
				try {
					var videos = await youtube.searchVideos(searchString, 10);
					let index = 0;
					msg.channel.sendEmbed(new Discord.RichEmbed().setDescription(`
__**≈ûarkƒ± se√ßimi:**__ \n 
${videos.map(video2 => `**${++index} -** ${video2.title}`).join('\n')}
 \n **l√ºtfen 1-10 arasƒ±nda bir rakam seciniz 30 saniye i√ßinde liste iptal edilecektir.**
`)
          .setColor('RANDOM'));
					// en fazla 5 tane 
					try {
						var response = await msg.channel.awaitMessages(msg2 => msg2.content > 0 && msg2.content < 11, {
							maxMatches: 1,
							time: 10000,
							errors: ['time']
						});
					} catch (err) {
						console.error(err);
            return msg.channel.sendEmbed(new Discord.RichEmbed()
            .setColor('RANDOM')
            .setDescription('‚ùé | ≈ûarkƒ± se√ßimi iptal edildi. '));
					}
					const videoIndex = parseInt(response.first().content);
					var video = await youtube.getVideoByID(videos[videoIndex - 1].id);
				} catch (err) {
					console.error(err);
          return msg.channel.sendEmbed(new Discord.RichEmbed()
          .setColor('RANDOM')
          .setDescription(' ‚ùé | Herhangi bir arama sonucu elde edemedim.'));
				}
			}
			return handleVideo(video, msg, voiceChannel);
		}
	} else if (command === 'ge√ß') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`You can not use commands here.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
    if (!msg.member.voiceChannel) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(' ‚ùé | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.'));
		if (!serverQueue) return msg.channel.send(' ‚ùé | Kuyruk bo≈ü olduƒüu i√ßin ge√ßemiyorum. ');
		serverQueue.connection.dispatcher.end('Ge√ß komudu kullanƒ±ldƒ±.');
		return undefined;
	} else if (command === 'qweqweqwedosgjsdflkh242309857238957y239856239856012356') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`You can not use commands here.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
    if (!msg.member.voiceChannel) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(' ‚ùé | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.'));
    if (!serverQueue) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(' ‚ùé | ≈ûu anda herhangi bir ≈üarkƒ± √ßalmƒ±yorum.'));
		serverQueue.songs = [];
		serverQueue.connection.dispatcher.end('Kapat komutu kullanƒ±ldƒ±!');
		return undefined;
	} else if (command === 'ses') {
    if (!message.guild) {
      if (!msg.guild) {
        const ozelmesajuyari = new Discord.RichEmbed()
        .setDescription(`You can not use commands here.`)
        return msg.author.sendEmbed(ozelmesajuyari); }
    if (!msg.member.voiceChannel) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
  .setDescription(' ‚ùé | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.'));
    if (!serverQueue) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
   .setDescription(' ‚ùé | ≈ûu anda herhangi bir ≈üarkƒ± √ßalmƒ±yorum.'));
    if (!args[1]) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(` <:hope:412142425838977024> | Ses seviyesi: **${serverQueue.volume}**`));
		serverQueue.volume = args[1];
		serverQueue.connection.dispatcher.setVolumeLogarithmic(args[1] / 5);
    return msg.channel.sendEmbed(new Discord.RichEmbed()
    (` <:hope:412142425838977024> | Yeni ses seviyesi: **${args[1]}**`));
      }
	} else if (command === '≈üarkƒ±adƒ±') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`<:uyari:405162608631480320> | ≈ûu anda hi√ßbir ≈üey √ßalmƒ±yorum.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
    if (!serverQueue) return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription('There is nothing playing.'));
    return msg.channel.sendEmbed(new Discord.RichEmbed()
    .setColor('RANDOM')
    .setDescription(`üé∂ ≈ûu anda √ßalƒ±nan ≈üarkƒ±: **${serverQueue.songs[0].title}**`));
	} else if (command === 'kuyruk') {
		if (!serverQueue) return msg.channel.send('‚ùé | ≈ûu anda hi√ßbir ≈üey √ßalmƒ±yorum. ');
		return msg.channel.send(`
__**≈ûarkƒ± listesi:**__ \n 
${serverQueue.songs.map(song => `**-** ${song.title}`).join('\n')}
\n **≈ûu anda √ßalƒ±nan:** ${serverQueue.songs[0].title}
		`);
	} else if (command === 'durdur') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`You can not use commands here.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
		if (serverQueue && serverQueue.playing) {
			serverQueue.playing = false;
			serverQueue.connection.dispatcher.pause();
      return msg.channel.sendEmbed(new Discord.RichEmbed()
      .setDescription('‚è∏ | M√ºzik durduruldu.')
      .setColor('RANDOM'));
		}
		return msg.channel.send('üö´ | ≈ûu anda hi√ßbir ≈üey √ßalmƒ±yorum.');
	} else if (command === 'devamet') {
    if (!msg.guild) {
      const ozelmesajuyari = new Discord.RichEmbed()
      .setDescription(`You can not use commands here.`)
      return msg.author.sendEmbed(ozelmesajuyari); }
		if (serverQueue && !serverQueue.playing) {
			serverQueue.playing = true;
			serverQueue.connection.dispatcher.resume();
      return msg.channel.sendEmbed(new Discord.RichEmbed()
      .setColor('RANDOM')
      .setDescription('‚ñ∂ | M√ºzik ≈üu anda devam ediyor..'));
		}
		return msg.channel.send('‚ùé | ≈ûu anda hi√ßbir ≈üey √ßalmƒ±yorum.');
  }

	return undefined;
});

async function handleVideo(video, msg, voiceChannel, playlist = false) {
	const serverQueue = queue.get(msg.guild.id);
	console.log(video);
	const song = {
		id: video.id,
		title: video.title, 
		url: `https://www.youtube.com/watch?v=${video.id}`
	};
	if (!serverQueue) {
		const queueConstruct = {
			textChannel: msg.channel,
			voiceChannel: voiceChannel,
			connection: null,
			songs: [],
			volume: 5,
			playing: true
		};
		queue.set(msg.guild.id, queueConstruct);

		queueConstruct.songs.push(song);

		try {
			var connection = await voiceChannel.join();
			queueConstruct.connection = connection;
			play(msg.guild, queueConstruct.songs[0]);
		} catch (error) {
			console.error(`I could not join the voice channel: ${error}`);
			queue.delete(msg.guild.id);
			return msg.channel.send(`I could not join the voice channel: ${error}`);
		}
	} else {
		serverQueue.songs.push(song);
		console.log(serverQueue.songs);
		if (playlist) return undefined;
    else return msg.channel.sendEmbed(new Discord.RichEmbed()
  .setDescription(`‚úî | **${song.title}** adlƒ± ≈üarkƒ± ba≈üarƒ±yla kuyruƒüa eklendi.`)
  .setColor('RANDOM'));
	}
	return undefined;
}

function play(guild, song) {
	const serverQueue = queue.get(guild.id);

	if (!song) {
		serverQueue.voiceChannel.leave();
		queue.delete(guild.id);
		return;
	}
	console.log(serverQueue.songs);

	const dispatcher = serverQueue.connection.playStream(ytdl(song.url))
		.on('end', reason => {
			if (reason === 'Stream is not generating quickly enough.') console.log('Song ended.');
			else console.log(reason);
			serverQueue.songs.shift();
			play(guild, serverQueue.songs[0]);
		})
		.on('error', error => console.error(error));
	dispatcher.setVolumeLogarithmic(serverQueue.volume / 5);

  serverQueue.textChannel.sendEmbed(new Discord.RichEmbed()
  .setDescription(`üé∂ √áalƒ±nan ≈üarkƒ±: **${song.title}**`)
  .setColor('RANDOM'));
}


client.on('message', (message) => {
    if (message.content.toLowerCase() === prefix + 'gir') {
        if (!message.guild) {
            const ozelmesajuyari = new Discord.RichEmbed()
            .setDescription(`You can not use commands here.`)
            return message.author.sendEmbed(ozelmesajuyari); }
        try 
    {
    message.member.voiceChannel.join();
     return message.channel.sendEmbed(new Discord.RichEmbed()
     .setDescription(' Ba≈üarƒ±lƒ± ‚û¢**' + message.member.voiceChannel+ '** adlƒ± kanala giri≈ü yaptƒ±m. ')
     .setColor('RANDOM'));
    }
    catch(e) 
    {
    return message.channel.sendEmbed(new Discord.RichEmbed()
    .setDescription('‚ùé | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.')
    .setColor('RANDOM'));
    }
    }

    if (message.content.toLocaleLowerCase() === prefix + 'kapat') {
        if (!message.guild) {
            const ozelmesajuyari = new Discord.RichEmbed()
            .setDescription(`You can not use commands here.`)
            return message.author.sendEmbed(ozelmesajuyari); }
            try
            {
                message.member.voiceChannel.leave();
                return message.channel.sendEmbed(new Discord.RichEmbed()
                .setDescription(' Ba≈üarƒ±lƒ± ‚û¢**' + message.member.voiceChannel+ '** adlƒ± kanaldan √ßƒ±kƒ±≈ü yaptƒ±m.')
                .setColor('RANDOM'));
               }
               catch(e) 
               {
               return message.channel.sendEmbed(new Discord.RichEmbed()
               .setDescription('<:uyari:405162608631480320> | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.')
               .setColor('RANDOM'));
               }
              }
          if (message.content.toLowerCase() === prefix + 'kanal bilgi' ) {
            if (!message.guild) {
              const ozelmesajuyari = new Discord.RichEmbed()
              .setDescription(`You can not use commands here.`)
              return message.author.sendEmbed(ozelmesajuyari); }
            try 
            {
           message.channel.sendEmbed(new Discord.RichEmbed().addField(' __Sesli kanal bilgileri__', ` **‚Ä¢** kanal ismi: **${message.member.voiceChannel.name}** \n **‚Ä¢** MAX kullanƒ±cƒ± sayƒ±sƒ±: **${message.member.voiceChannel.userLimit}** \n **‚Ä¢** Bit hƒ±zƒ±: **${message.member.voiceChannel.bitrate}** \n **‚Ä¢** kanal ID: **${message.member.voiceChannelID} ** \n **‚Ä¢** Kanal pozisyonu **${message.member.voiceChannel.position}**`).setColor('RANDOM'));
              }
              catch(e)
              {
                message.channel.sendEmbed(new Discord.RichEmbed()
                .setDescription('‚ùé | L√ºtfen √∂ncelikle sesli bir kanala katƒ±lƒ±nƒ±z.')
                .setColor('RANDOM'));
              };
            }           
        });

client.login(process.env.BOT_TOKEN);
